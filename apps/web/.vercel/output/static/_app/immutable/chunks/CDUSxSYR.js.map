{"version":3,"file":"CDUSxSYR.js","sources":["../../../../../../../../packages/core/dist/stores/index.js","../../../../../../../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/stringify.js","../../../../../../../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/rng.js","../../../../../../../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/native.js","../../../../../../../../node_modules/.pnpm/uuid@11.1.0/node_modules/uuid/dist/esm-browser/v4.js","../../../../../../../../packages/core/dist/services/index.js"],"sourcesContent":["/**\n * Yjs document store definitions for Gigwidget\n *\n * Architecture:\n * - Each Song has its own Y.Doc for fine-grained sync\n * - Library is a Y.Doc with references to songs (not full content)\n * - Spaces are Y.Docs shared among members\n */\nimport * as Y from 'yjs';\n// ============================================================================\n// Song Document\n// ============================================================================\n/**\n * Creates a Yjs document for a single song.\n * Each song is its own document to enable:\n * - Fine-grained sync (only sync songs that changed)\n * - Selective sharing (share individual songs)\n * - Collaborative editing of specific songs\n */\nexport function createSongDoc(songId) {\n    const doc = new Y.Doc({ guid: `song-${songId}` });\n    return doc;\n}\n/**\n * Type-safe accessors for song document structures\n */\nexport const SongDoc = {\n    /** Song metadata (title, artist, key, etc.) */\n    getMetadata(doc) {\n        return doc.getMap('metadata');\n    },\n    /** Array of arrangement references */\n    getArrangements(doc) {\n        return doc.getArray('arrangements');\n    },\n    /** Map of arrangementId → Y.Text for content */\n    getContents(doc) {\n        return doc.getMap('contents');\n    },\n    /** Get or create content text for an arrangement */\n    getArrangementContent(doc, arrangementId) {\n        const contents = this.getContents(doc);\n        let content = contents.get(arrangementId);\n        if (!content) {\n            content = new Y.Text();\n            contents.set(arrangementId, content);\n        }\n        return content;\n    },\n    /** Tags array */\n    getTags(doc) {\n        return doc.getArray('tags');\n    },\n};\n// ============================================================================\n// Library Document\n// ============================================================================\n/**\n * Creates a library document for a user.\n * Contains lightweight references to songs, not full content.\n */\nexport function createLibraryDoc(userId) {\n    const doc = new Y.Doc({ guid: `library-${userId}` });\n    return doc;\n}\n/**\n * Type-safe accessors for library document structures\n */\nexport const LibraryDoc = {\n    /** Map of songId → song metadata for listing */\n    getSongs(doc) {\n        return doc.getMap('songs');\n    },\n    /** User's space memberships */\n    getSpaces(doc) {\n        return doc.getArray('spaces');\n    },\n    /** Sync state tracking */\n    getSyncState(doc) {\n        return doc.getMap('syncState');\n    },\n};\n// ============================================================================\n// Space Document\n// ============================================================================\n/**\n * Creates a space document for shared collections.\n * Synced among all members of the space.\n */\nexport function createSpaceDoc(spaceId) {\n    const doc = new Y.Doc({ guid: `space-${spaceId}` });\n    return doc;\n}\n/**\n * Type-safe accessors for space document structures\n */\nexport const SpaceDoc = {\n    /** Space metadata (name, description, type) */\n    getMetadata(doc) {\n        return doc.getMap('metadata');\n    },\n    /** Map of userId → member info with roles */\n    getMembers(doc) {\n        return doc.getMap('members');\n    },\n    /** Array of song IDs shared in this space */\n    getSongIds(doc) {\n        return doc.getArray('songIds');\n    },\n    /** Space settings */\n    getSettings(doc) {\n        return doc.getMap('settings');\n    },\n};\n// ============================================================================\n// Session Document (Ephemeral)\n// ============================================================================\n/**\n * Creates a session document for ad-hoc P2P sessions.\n * These are ephemeral and not persisted to IndexedDB.\n */\nexport function createSessionDoc(sessionId) {\n    const doc = new Y.Doc({ guid: `session-${sessionId}` });\n    return doc;\n}\n/**\n * Type-safe accessors for session document structures\n */\nexport const SessionDoc = {\n    /** Session metadata (host, type, settings) */\n    getMetadata(doc) {\n        return doc.getMap('metadata');\n    },\n    /** Connected participants */\n    getParticipants(doc) {\n        return doc.getMap('participants');\n    },\n    /** Shared song IDs for this session */\n    getSharedSongIds(doc) {\n        return doc.getArray('sharedSongIds');\n    },\n    /** Real-time presence/awareness data */\n    getPresence(doc) {\n        return doc.getMap('presence');\n    },\n};\n// ============================================================================\n// Utilities\n// ============================================================================\n/**\n * Generate a content hash for conflict detection\n */\nexport function computeContentHash(content) {\n    // Simple hash for conflict detection\n    // In production, use crypto.subtle.digest\n    let hash = 0;\n    for (let i = 0; i < content.length; i++) {\n        const char = content.charCodeAt(i);\n        hash = ((hash << 5) - hash) + char;\n        hash = hash & hash;\n    }\n    return hash.toString(16);\n}\n/**\n * Encode a Y.Doc state for transmission/storage\n */\nexport function encodeDocState(doc) {\n    return Y.encodeStateAsUpdate(doc);\n}\n/**\n * Apply an encoded state to a Y.Doc\n */\nexport function applyDocState(doc, state, origin) {\n    Y.applyUpdate(doc, state, origin);\n}\n/**\n * Merge two Y.Doc states\n */\nexport function mergeDocStates(state1, state2) {\n    return Y.mergeUpdates([state1, state2]);\n}\n//# sourceMappingURL=index.js.map","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","/**\n * Domain services for Gigwidget\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport { computeContentHash } from '../stores/index.js';\n// ============================================================================\n// ID Generation\n// ============================================================================\nexport function generateId() {\n    return uuidv4();\n}\nexport function generateLocalUserId() {\n    return `local-${uuidv4()}`;\n}\n// ============================================================================\n// User Service\n// ============================================================================\nexport function createAnonymousUser(displayName) {\n    return {\n        id: generateLocalUserId(),\n        displayName: displayName ?? `User ${Math.random().toString(36).substring(2, 6)}`,\n        instruments: [],\n        subscriptionTier: 'free',\n        createdAt: new Date(),\n    };\n}\nexport function upgradeToAuthenticatedUser(user, supabaseId) {\n    return {\n        ...user,\n        supabaseId,\n        id: user.id, // Keep local ID for data continuity\n    };\n}\n// ============================================================================\n// Song Service\n// ============================================================================\nexport function createSong(ownerId, title, options) {\n    const id = generateId();\n    return {\n        id,\n        ownerId,\n        title,\n        artist: options?.artist,\n        key: options?.key,\n        tempo: options?.tempo,\n        timeSignature: options?.timeSignature,\n        tags: options?.tags ?? [],\n        visibility: options?.visibility ?? 'private',\n        spaceIds: [],\n        createdAt: new Date(),\n        updatedAt: new Date(),\n        yjsDocId: `song-${id}`,\n    };\n}\nexport function createArrangement(songId, instrument, options) {\n    const content = options?.content ?? '';\n    return {\n        id: generateId(),\n        songId,\n        instrument,\n        tuning: options?.tuning,\n        capo: options?.capo,\n        content,\n        version: 1,\n        baseVersionHash: computeContentHash(content),\n        createdAt: new Date(),\n        updatedAt: new Date(),\n    };\n}\n// ============================================================================\n// Snapshot Service\n// ============================================================================\nconst MAX_SNAPSHOTS_PER_ARRANGEMENT = 10;\nexport function createSnapshot(arrangement, note) {\n    return {\n        id: generateId(),\n        songId: arrangement.songId,\n        arrangementId: arrangement.id,\n        content: arrangement.content,\n        versionHash: computeContentHash(arrangement.content),\n        createdAt: new Date(),\n        note,\n    };\n}\nexport function pruneSnapshots(snapshots) {\n    if (snapshots.length <= MAX_SNAPSHOTS_PER_ARRANGEMENT) {\n        return snapshots;\n    }\n    // Keep the most recent snapshots\n    return snapshots\n        .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())\n        .slice(0, MAX_SNAPSHOTS_PER_ARRANGEMENT);\n}\n// ============================================================================\n// Conflict Detection\n// ============================================================================\nexport function detectConflict(local, remote) {\n    // If base versions match, no conflict\n    const remoteHash = computeContentHash(remote.content);\n    if (local.baseVersionHash === remoteHash) {\n        return null;\n    }\n    // If local hasn't changed from base, just accept remote\n    const localHash = computeContentHash(local.content);\n    if (localHash === local.baseVersionHash) {\n        return null;\n    }\n    // Both changed - conflict!\n    return {\n        id: generateId(),\n        songId: local.songId,\n        arrangementId: local.id,\n        localContent: local.content,\n        remoteContent: remote.content,\n        localUpdatedAt: local.updatedAt,\n        remoteUpdatedAt: remote.updatedAt,\n        remoteUserId: remote.userId,\n        remoteUserName: remote.userName,\n        detectedAt: new Date(),\n        resolved: false,\n    };\n}\nexport function resolveConflict(conflict, resolution) {\n    return {\n        ...conflict,\n        resolved: true,\n        resolution,\n    };\n}\n// ============================================================================\n// Space Service\n// ============================================================================\nexport function createSpace(ownerId, name, type, options) {\n    const id = generateId();\n    return {\n        id,\n        name,\n        description: options?.description,\n        type,\n        ownerId,\n        cloudEnabled: options?.cloudEnabled ?? false,\n        yjsDocId: `space-${id}`,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n    };\n}\n// ============================================================================\n// Session Service\n// ============================================================================\nexport function createSession(hostId, type, options) {\n    const now = Date.now();\n    const expiresAt = options?.expiresInMs\n        ? new Date(now + options.expiresInMs)\n        : undefined;\n    const id = generateId();\n    // Connection info will be set by the appropriate provider\n    const connectionInfo = createConnectionInfoPlaceholder(type, id);\n    return {\n        id,\n        hostId,\n        type,\n        connectionInfo,\n        libraryScope: options?.libraryScope ?? 'full',\n        selectedSongIds: options?.selectedSongIds,\n        createdAt: new Date(now),\n        expiresAt,\n    };\n}\nfunction createConnectionInfoPlaceholder(type, sessionId) {\n    switch (type) {\n        case 'webrtc':\n            return {\n                type: 'webrtc',\n                signalingServer: '', // Set by provider\n                roomId: sessionId,\n                password: undefined,\n            };\n        case 'bluetooth':\n            return {\n                type: 'bluetooth',\n                serviceUUID: '', // Set by provider\n                characteristicUUID: '', // Set by provider\n                deviceName: '', // Set by provider\n            };\n        case 'local-network':\n            return {\n                type: 'local-network',\n                addresses: [], // Set by provider\n                port: 0, // Set by provider\n                token: generateId(),\n            };\n    }\n}\nexport function isSessionExpired(session) {\n    if (!session.expiresAt)\n        return false;\n    return new Date() > session.expiresAt;\n}\n// ============================================================================\n// Transpose Service\n// ============================================================================\n/**\n * Chromatic scale for transposition.\n * Uses sharps as canonical form, flats mapped during display.\n */\nconst CHROMATIC_SCALE = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];\n/**\n * Map of enharmonic equivalents (flats to sharps)\n */\nconst ENHARMONIC_MAP = {\n    'Db': 'C#',\n    'Eb': 'D#',\n    'Fb': 'E',\n    'Gb': 'F#',\n    'Ab': 'G#',\n    'Bb': 'A#',\n    'Cb': 'B',\n};\n/**\n * Map of sharps to flats for display\n */\nconst SHARP_TO_FLAT = {\n    'C#': 'Db',\n    'D#': 'Eb',\n    'F#': 'Gb',\n    'G#': 'Ab',\n    'A#': 'Bb',\n};\n/**\n * Parse a chord name into root, quality, and bass note.\n * E.g., \"Am7/G\" → { root: \"A\", quality: \"m7\", bass: \"G\" }\n */\nexport function parseChord(chord) {\n    // Match chord pattern: root note, optional quality, optional bass note\n    const match = chord.match(/^([A-G][#b]?)([^/]*)?(?:\\/([A-G][#b]?))?$/);\n    if (!match)\n        return null;\n    return {\n        root: match[1],\n        quality: match[2] || '',\n        bass: match[3],\n    };\n}\n/**\n * Get the semitone index of a note (0-11)\n */\nexport function getNoteIndex(note) {\n    const normalized = ENHARMONIC_MAP[note] ?? note;\n    const index = CHROMATIC_SCALE.indexOf(normalized);\n    return index >= 0 ? index : -1;\n}\n/**\n * Transpose a single note by N semitones.\n * @param note - The note to transpose (e.g., \"C#\", \"Bb\")\n * @param semitones - Number of semitones to transpose (positive = up, negative = down)\n * @param preferFlats - Whether to prefer flat notation\n */\nexport function transposeNote(note, semitones, preferFlats = false) {\n    const index = getNoteIndex(note);\n    if (index < 0)\n        return note;\n    // Calculate new index with wrapping\n    const newIndex = ((index + semitones) % 12 + 12) % 12;\n    const result = CHROMATIC_SCALE[newIndex];\n    // Convert to flat if preferred and available\n    if (preferFlats && SHARP_TO_FLAT[result]) {\n        return SHARP_TO_FLAT[result];\n    }\n    return result;\n}\n/**\n * Transpose a chord by N semitones.\n * @param chord - The chord to transpose (e.g., \"Am7/G\")\n * @param semitones - Number of semitones\n * @param preferFlats - Whether to prefer flat notation\n */\nexport function transposeChord(chord, semitones, preferFlats = false) {\n    const parsed = parseChord(chord);\n    if (!parsed)\n        return chord;\n    const newRoot = transposeNote(parsed.root, semitones, preferFlats);\n    const newBass = parsed.bass ? transposeNote(parsed.bass, semitones, preferFlats) : undefined;\n    return newRoot + parsed.quality + (newBass ? `/${newBass}` : '');\n}\n/**\n * Calculate semitones between two keys.\n * @param fromKey - Starting key\n * @param toKey - Target key\n */\nexport function getSemitonesBetweenKeys(fromKey, toKey) {\n    // Extract root note (remove 'm' for minor keys)\n    const fromRoot = fromKey.replace(/m$/, '');\n    const toRoot = toKey.replace(/m$/, '');\n    const fromIndex = getNoteIndex(fromRoot);\n    const toIndex = getNoteIndex(toRoot);\n    if (fromIndex < 0 || toIndex < 0)\n        return 0;\n    return ((toIndex - fromIndex) % 12 + 12) % 12;\n}\n/**\n * Transpose all chords in ChordPro content.\n * @param content - ChordPro formatted content\n * @param semitones - Number of semitones to transpose\n * @param preferFlats - Whether to prefer flat notation\n */\nexport function transposeChordProContent(content, semitones, preferFlats = false) {\n    if (semitones === 0)\n        return content;\n    // Match chords in square brackets [Chord]\n    return content.replace(/\\[([^\\]]+)\\]/g, (_, chord) => {\n        const transposed = transposeChord(chord, semitones, preferFlats);\n        return `[${transposed}]`;\n    });\n}\n/**\n * Get the display name for a transposition.\n * @param semitones - Number of semitones\n */\nexport function getTransposeDisplayName(semitones) {\n    if (semitones === 0)\n        return 'Original';\n    const direction = semitones > 0 ? '+' : '';\n    return `${direction}${semitones} semitone${Math.abs(semitones) !== 1 ? 's' : ''}`;\n}\n// ============================================================================\n// Scraper Service (re-export)\n// ============================================================================\nexport { searchOzbcozSongs, getOzbcozSongDetail, convertToGigwidgetSong, } from './scraper.js';\n// ============================================================================\n// Permissions Service (re-export)\n// ============================================================================\nexport { hasPermission, hasAllPermissions, hasAnyPermission, getUserPermissions, getEffectiveTier, getRequiredTierForPermission, canUpgrade, getNextTier, TIER_INFO, } from './permissions.js';\n//# sourceMappingURL=index.js.map"],"names":["createSongDoc","songId","Y.Doc","SongDoc","doc","arrangementId","contents","content","Y.Text","createLibraryDoc","userId","LibraryDoc","createSpaceDoc","spaceId","SpaceDoc","createSessionDoc","sessionId","SessionDoc","computeContentHash","hash","i","char","encodeDocState","Y.encodeStateAsUpdate","applyDocState","state","origin","Y.applyUpdate","mergeDocStates","state1","state2","Y.mergeUpdates","byteToHex","unsafeStringify","arr","offset","getRandomValues","rnds8","rng","randomUUID","native","v4","options","buf","rnds","generateId","uuidv4","generateLocalUserId","createAnonymousUser","displayName","upgradeToAuthenticatedUser","user","supabaseId","createSong","ownerId","title","id","createArrangement","instrument","MAX_SNAPSHOTS_PER_ARRANGEMENT","createSnapshot","arrangement","note","pruneSnapshots","snapshots","a","b","detectConflict","local","remote","remoteHash","resolveConflict","conflict","resolution","createSpace","name","type","createSession","hostId","now","expiresAt","connectionInfo","createConnectionInfoPlaceholder","isSessionExpired","session","CHROMATIC_SCALE","ENHARMONIC_MAP","SHARP_TO_FLAT","parseChord","chord","match","getNoteIndex","normalized","index","transposeNote","semitones","preferFlats","newIndex","result","transposeChord","parsed","newRoot","newBass","getSemitonesBetweenKeys","fromKey","toKey","fromRoot","toRoot","fromIndex","toIndex","transposeChordProContent","_","getTransposeDisplayName"],"mappings":"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","x_google_ignoreList":[1,2,3,4]}