import{w as l,au as b,aA as o,av as v,ab as u,al as _,r as d,ah as m,aC as k,am as g,ad as y,ac as w,aD as A,ae as E,af as R,ag as T,a9 as S,Q as p,B}from"./cnc2SBSL.js";class D{anchor;#s=new Map;#t=new Map;#e=new Map;#a=new Set;#r=!0;constructor(s,a=!0){this.anchor=s,this.#r=a}#i=()=>{var s=l;if(this.#s.has(s)){var a=this.#s.get(s),e=this.#t.get(a);if(e)b(e),this.#a.delete(a);else{var f=this.#e.get(a);f&&(this.#t.set(a,f.effect),this.#e.delete(a),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),e=f.effect)}for(const[r,t]of this.#s){if(this.#s.delete(r),r===s)break;const i=this.#e.get(t);i&&(o(i.effect),this.#e.delete(t))}for(const[r,t]of this.#t){if(r===a||this.#a.has(r))continue;const i=()=>{if(Array.from(this.#s.values()).includes(r)){var c=document.createDocumentFragment();k(t,c),c.append(u()),this.#e.set(r,{effect:t,fragment:c})}else o(t);this.#a.delete(r),this.#t.delete(r)};this.#r||!e?(this.#a.add(r),v(t,i,!1)):i()}}};#f=s=>{this.#s.delete(s);const a=Array.from(this.#s.values());for(const[e,f]of this.#e)a.includes(e)||(o(f.effect),this.#e.delete(e))};ensure(s,a){var e=l,f=g();if(a&&!this.#t.has(s)&&!this.#e.has(s))if(f){var r=document.createDocumentFragment(),t=u();r.append(t),this.#e.set(s,{effect:_(()=>a(t)),fragment:r})}else this.#t.set(s,_(()=>a(this.anchor)));if(this.#s.set(e,s),f){for(const[i,h]of this.#t)i===s?e.skipped_effects.delete(h):e.skipped_effects.add(h);for(const[i,h]of this.#e)i===s?e.skipped_effects.delete(h.effect):e.skipped_effects.add(h.effect);e.oncommit(this.#i),e.ondiscard(this.#f)}else d&&(this.anchor=m),this.#i()}}function M(n,s,a=!1){d&&w();var e=new D(n),f=a?A:0;function r(t,i){if(d){const c=E(n)===R;if(t===c){var h=T();S(h),e.anchor=h,p(!1),e.ensure(t,i),p(!0);return}}e.ensure(t,i)}y(()=>{var t=!1;s((i,h=!0)=>{t=!0,r(h,i)}),t||r(!1,null)},f)}const x=B;export{D as B,x as b,M as i};
//# sourceMappingURL=Coh7MiEg.js.map
