const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DhSYb-d6.js","../chunks/Cpj98o6Y.js","../chunks/CDUSxSYR.js","../chunks/CKx7fsl1.js"])))=>i.map(i=>d[i]);
import{V as pa,X as da,Y as ua,_ as U,s as k,W,x as _a,$ as fa,a0 as n,Z as i,b as a,a1 as t,a3 as X,a5 as Y,a2 as h}from"../chunks/cnc2SBSL.js";import{d as ma,f as c,a as l,c as ba,s as p}from"../chunks/Caf-0pf-.js";import{i as g,b as ha}from"../chunks/Coh7MiEg.js";import{h as ga,e as Z,i as j}from"../chunks/ClOXSIRR.js";import{s as ya}from"../chunks/oTU1mMgh.js";import{T as F,c as q}from"../chunks/Dyjw1x4N.js";var xa=c('<div class="loading svelte-8i5vi8">Loading...</div>'),Ta=c('<p class="plan-price svelte-8i5vi8"> </p>'),wa=c('<p class="plan-price svelte-8i5vi8">Free</p>'),Pa=c('<li class="svelte-8i5vi8"> </li>'),Aa=c('<span class="current-badge svelte-8i5vi8">Current Plan</span>'),Da=c('<button class="btn btn-primary">Select Plan</button>'),Ea=c('<div><h3> </h3> <p class="plan-desc svelte-8i5vi8"> </p> <!> <ul class="features svelte-8i5vi8"></ul> <!></div>'),ka=c('<section class="current-plan svelte-8i5vi8"><h2>Current Plan</h2> <div class="plan-card active svelte-8i5vi8"><span class="plan-name"> </span> <p class="plan-desc svelte-8i5vi8"> </p></div></section> <section class="plans svelte-8i5vi8"><h2>Available Plans</h2> <div class="plans-grid svelte-8i5vi8"></div></section>',1),Fa=c('<main class="container"><header class="page-header svelte-8i5vi8"><a href="/" class="back-link svelte-8i5vi8">&larr; Home</a> <h1>Account</h1></header> <!></main>');function Va(z,B){pa(B,!0);let o=W(null),I=W(!0),L=!1;da(()=>{!ha||L||(L=!0,J())});async function J(){try{const{getDatabase:s}=await U(async()=>{const{getDatabase:u}=await import("../chunks/DhSYb-d6.js");return{getDatabase:u}},__vite__mapDeps([0,1,2,3]),import.meta.url),d=await s().users.toArray();d.length>0&&k(o,d[0],!0)}catch(s){console.error("Failed to load user:",s)}finally{k(I,!1)}}async function K(s){if(a(o))try{const{getDatabase:v}=await U(async()=>{const{getDatabase:u}=await import("../chunks/DhSYb-d6.js");return{getDatabase:u}},__vite__mapDeps([0,1,2,3]),import.meta.url);await v().users.update(a(o).id,{subscriptionTier:s}),k(o,{...a(o),subscriptionTier:s},!0)}catch(v){console.error("Failed to update tier:",v)}}const M=["free","basic","pro","mod"];var y=Fa();ga("8i5vi8",s=>{_a(()=>{fa.title="Account - Gigwidget"})});var Q=n(i(y),2);{var $=s=>{var v=xa();l(s,v)},aa=s=>{var v=ba(),d=X(v);{var u=x=>{var C=ka(),T=X(C),N=n(i(T),2),w=i(N),ea=i(w,!0);t(w);var O=n(w,2),sa=i(O,!0);t(O),t(N),t(T);var R=n(T,2),V=n(i(R),2);Z(V,21,()=>M,j,(P,_)=>{const f=Y(()=>F[a(_)]),G=Y(()=>a(o).subscriptionTier===a(_));var b=Ea();let H;var A=i(b),ta=i(A,!0);t(A);var D=n(A,2),ra=i(D,!0);t(D);var S=n(D,2);{var ia=e=>{var r=Ta(),m=i(r,!0);t(r),h(()=>p(m,a(f).price)),l(e,r)},la=e=>{var r=wa();l(e,r)};g(S,e=>{a(f).price?e(ia):e(la,!1)})}var E=n(S,2);Z(E,21,()=>a(f).features,j,(e,r)=>{var m=Pa(),ca=i(m,!0);t(m),h(()=>p(ca,a(r))),l(e,m)}),t(E);var oa=n(E,2);{var va=e=>{var r=Aa();l(e,r)},na=e=>{var r=Da();r.__click=()=>K(a(_)),l(e,r)};g(oa,e=>{a(G)?e(va):e(na,!1)})}t(b),h(()=>{H=ya(b,1,"plan-card svelte-8i5vi8",null,H,{active:a(G)}),p(ta,a(f).displayName),p(ra,a(f).description)}),l(P,b)}),t(V),t(R),h((P,_)=>{p(ea,P),p(sa,_)},[()=>F[q(a(o))].displayName,()=>F[q(a(o))].description]),l(x,C)};g(d,x=>{a(o)&&x(u)},!0)}l(s,v)};g(Q,s=>{a(I)?s($):s(aa,!1)})}t(y),l(z,y),ua()}ma(["click"]);export{Va as component};
//# sourceMappingURL=3.C4LxtNQL.js.map
