const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DhSYb-d6.js","../chunks/Cpj98o6Y.js","../chunks/CDUSxSYR.js","../chunks/CKx7fsl1.js","../chunks/BMDA9hg8.js","../chunks/BhPu-S6K.js","../chunks/Dyjw1x4N.js"])))=>i.map(i=>d[i]);
import{V as he,W as x,c as ke,X as ye,Z as s,a0 as l,a2 as p,b as e,Y as we,_ as M,s as o,x as Se,$ as xe,a1 as r,a3 as se}from"../chunks/cnc2SBSL.js";import{d as ze,f as v,a as u,s as _,c as oe}from"../chunks/Caf-0pf-.js";import{i as f,b as De}from"../chunks/Coh7MiEg.js";import{h as Ee,e as Ie,i as Ae}from"../chunks/ClOXSIRR.js";import{r as Oe,s as Pe}from"../chunks/L9orpk0O.js";import{b as $e}from"../chunks/_dvcZOuR.js";import{g as Le}from"../chunks/BJEHMrWO.js";var Re=v('<div class="error-message svelte-1kumcmu"> </div>'),Te=v('<div class="success-message svelte-1kumcmu"> </div>'),Ve=v('<p class="preview-meta svelte-1kumcmu"> </p>'),Ce=v('<p class="preview-meta svelte-1kumcmu"> </p>'),Be=v('<p class="preview-meta svelte-1kumcmu"> </p>'),Ke=v('<p class="preview-meta svelte-1kumcmu"> </p>'),Ne=v('<a target="_blank" rel="noopener" class="btn btn-secondary">View on YouTube</a>'),Ue=v('<section class="preview-section svelte-1kumcmu"><div class="preview-header svelte-1kumcmu"><h2> </h2> <button class="btn btn-secondary btn-small svelte-1kumcmu">Back to Results</button></div> <!> <!> <!> <!> <div class="preview-content svelte-1kumcmu"><h3 class="svelte-1kumcmu">ChordPro Content</h3> <pre class="chordpro-preview svelte-1kumcmu"> </pre></div> <div class="import-actions svelte-1kumcmu"><button class="btn btn-primary"> </button> <!></div></section>'),We=v('<span class="result-artist svelte-1kumcmu"> </span>'),Ye=v('<span class="result-key svelte-1kumcmu"> </span>'),Fe=v('<li class="result-item svelte-1kumcmu"><button class="result-button svelte-1kumcmu"><span class="result-title svelte-1kumcmu"> </span> <!> <!></button></li>'),Ge=v('<section class="results-section svelte-1kumcmu"><h2> </h2> <ul class="results-list svelte-1kumcmu"></ul></section>'),Me=v('<p class="no-results svelte-1kumcmu">No results yet. Click Search to find songs.</p>'),Qe=v('<div class="loading-overlay svelte-1kumcmu"><div class="loading-spinner svelte-1kumcmu">Loading song details...</div></div>'),Xe=v('<main class="container"><header class="header svelte-1kumcmu"><a href="/" class="back-link svelte-1kumcmu">&larr; Back</a> <h1>Import from ozbcoz.com</h1></header> <section class="search-section svelte-1kumcmu"><p class="description svelte-1kumcmu">Search the ozbcoz.com ukulele songbook for ChordPro songs to import into your library.</p> <div class="search-box svelte-1kumcmu"><input type="text" placeholder="Search by song title or artist..." class="search-input svelte-1kumcmu"/> <button class="btn btn-primary"> </button></div></section> <!> <!> <!> <!></main>');function at(ie,ne){he(ne,!0);let B=x(null),E=x(""),P=x(ke([])),a=x(null),$=x(!1),K=x(!1),N=x(!1),b=x(null),U=x(null),H=!1,Q,X;ye(()=>{!De||H||(H=!0,(async()=>{const{getDatabase:t}=await M(async()=>{const{getDatabase:k}=await import("../chunks/DhSYb-d6.js");return{getDatabase:k}},__vite__mapDeps([0,1,2,3]),import.meta.url),m=await t().users.toArray();m.length>0&&o(B,m[0],!0);const g=await M(()=>import("../chunks/BMDA9hg8.js"),__vite__mapDeps([4,5,2,3,6]),import.meta.url);Q=g.searchOzbcozSongs,X=g.getOzbcozSongDetail})())});async function J(){if(!(!e(E).trim()||!Q)){o($,!0),o(b,null),o(a,null),o(U,null);try{o(P,await Q(e(E)),!0),e(P).length===0&&o(b,`No songs found for "${e(E)}"`)}catch(t){o(b,t instanceof Error?t.message:"Search failed",!0),o(P,[],!0)}finally{o($,!1)}}}async function le(t){if(X){o(K,!0),o(b,null);try{o(a,await X(t.id),!0)}catch(n){o(b,n instanceof Error?n.message:"Failed to load song details",!0),o(a,null)}finally{o(K,!1)}}}async function ce(){if(!(!e(a)||!e(B))){o(N,!0),o(b,null);try{const{getDatabase:t}=await M(async()=>{const{getDatabase:d}=await import("../chunks/DhSYb-d6.js");return{getDatabase:d}},__vite__mapDeps([0,1,2,3]),import.meta.url),{createSong:n,createArrangement:m}=await M(async()=>{const{createSong:d,createArrangement:y}=await import("../chunks/BMDA9hg8.js");return{createSong:d,createArrangement:y}},__vite__mapDeps([4,5,2,3,6]),import.meta.url),g=t(),k=n(e(B).id,e(a).title,{artist:e(a).artist||e(a).writer,key:e(a).key,tempo:e(a).tempo,tags:["imported","ozbcoz"]}),h=m(k.id,"ukulele",{content:e(a).content});await g.songs.add(k),await g.arrangements.add(h),o(U,`Successfully imported "${e(a).title}"`),setTimeout(()=>{Le(`/songs/${k.id}`)},1500)}catch(t){o(b,t instanceof Error?t.message:"Import failed",!0)}finally{o(N,!1)}}}function ue(t){t.key==="Enter"&&J()}function ve(){o(a,null),o(b,null)}var Z=Xe();Ee("1kumcmu",t=>{Se(()=>{xe.title="Import Songs - Gigwidget"})});var j=l(s(Z),2),ee=l(s(j),2),C=s(ee);Oe(C),C.__keydown=ue;var W=l(C,2);W.__click=J;var me=s(W,!0);r(W),r(ee),r(j);var te=l(j,2);{var _e=t=>{var n=Re(),m=s(n,!0);r(n),p(()=>_(m,e(b))),u(t,n)};f(te,t=>{e(b)&&t(_e)})}var ae=l(te,2);{var de=t=>{var n=Te(),m=s(n,!0);r(n),p(()=>_(m,e(U))),u(t,n)};f(ae,t=>{e(U)&&t(de)})}var re=l(ae,2);{var pe=t=>{var n=Ue(),m=s(n),g=s(m),k=s(g,!0);r(g);var h=l(g,2);h.__click=ve,r(m);var d=l(m,2);{var y=i=>{var c=Ve(),O=s(c);r(c),p(()=>_(O,`Artist: ${e(a).artist??""}`)),u(i,c)};f(d,i=>{e(a).artist&&i(y)})}var L=l(d,2);{var z=i=>{var c=Ce(),O=s(c);r(c),p(()=>_(O,`Writer: ${e(a).writer??""}`)),u(i,c)};f(L,i=>{e(a).writer&&e(a).writer!==e(a).artist&&i(z)})}var R=l(L,2);{var D=i=>{var c=Be(),O=s(c);r(c),p(()=>_(O,`Key: ${e(a).key??""}`)),u(i,c)};f(R,i=>{e(a).key&&i(D)})}var T=l(R,2);{var V=i=>{var c=Ke(),O=s(c);r(c),p(()=>_(O,`Tempo: ${e(a).tempo??""} BPM`)),u(i,c)};f(T,i=>{e(a).tempo&&i(V)})}var I=l(T,2),Y=l(s(I),2),F=s(Y,!0);r(Y),r(I);var G=l(I,2),A=s(G);A.__click=ce;var q=s(A,!0);r(A);var w=l(A,2);{var S=i=>{var c=Ne();p(()=>Pe(c,"href",e(a).youtubeUrl)),u(i,c)};f(w,i=>{e(a).youtubeUrl&&i(S)})}r(G),r(n),p(()=>{_(k,e(a).title),_(F,e(a).content),A.disabled=e(N)||!e(B),_(q,e(N)?"Importing...":"Import to Library")}),u(t,n)},fe=t=>{var n=oe(),m=se(n);{var g=h=>{var d=Ge(),y=s(d),L=s(y);r(y);var z=l(y,2);Ie(z,21,()=>e(P),Ae,(R,D)=>{var T=Fe(),V=s(T);V.__click=()=>le(e(D));var I=s(V),Y=s(I,!0);r(I);var F=l(I,2);{var G=w=>{var S=We(),i=s(S,!0);r(S),p(()=>_(i,e(D).artist)),u(w,S)};f(F,w=>{e(D).artist&&w(G)})}var A=l(F,2);{var q=w=>{var S=Ye(),i=s(S,!0);r(S),p(()=>_(i,e(D).key)),u(w,S)};f(A,w=>{e(D).key&&w(q)})}r(V),r(T),p(()=>{V.disabled=e(K),_(Y,e(D).title)}),u(R,T)}),r(z),r(d),p(()=>_(L,`Search Results (${e(P).length??""})`)),u(h,d)},k=h=>{var d=oe(),y=se(d);{var L=z=>{var R=Me();u(z,R)};f(y,z=>{!e($)&&e(E)&&z(L)},!0)}u(h,d)};f(m,h=>{e(P).length>0?h(g):h(k,!1)},!0)}u(t,n)};f(re,t=>{e(a)?t(pe):t(fe,!1)})}var ge=l(re,2);{var be=t=>{var n=Qe();u(t,n)};f(ge,t=>{e(K)&&t(be)})}r(Z),p(t=>{C.disabled=e($),W.disabled=t,_(me,e($)?"Searching...":"Search")},[()=>e($)||!e(E).trim()]),$e(C,()=>e(E),t=>o(E,t)),u(ie,Z),we()}ze(["keydown","click"]);export{at as component};
//# sourceMappingURL=4.B0cZjOGk.js.map
