{"version":3,"mappings":"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","names":["songs","$.state","$.proxy","loading","searchQuery","hasLoaded","$.user_effect","browser","loadSongs","SongRepository","getDatabase","users","err","$.set","handleSearch","formatDate","date","main","root","$.head","$$anchor","section","div","input","$.child","$.remove_input_defaults","div_1","root_2","div_2","root_4","p","$.first_child","fragment_1","button","$$render","consequent_1","alternate","ul","root_7","$.get","song","li","root_8","a","div_3","span","span_1","root_9","$.template_effect","$.set_text","text_2","consequent_3","span_2","$.sibling","node_3","div_4","span_3","root_10","text_4","consequent_4","span_4","root_11","text_5","consequent_5","div_5","root_12","$.index","tag","span_5","root_13","span_6","root_14","text_7","consequent_6","consequent_7","text_1","consequent_2","alternate_1","consequent","alternate_2","$$value"],"ignoreList":[],"sources":["../../../../../../src/routes/songs/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { browser } from '$app/environment';\n  import type { Song } from '@gigwidget/core';\n\n  let songs = $state<Song[]>([]);\n  let loading = $state(true);\n  let searchQuery = $state('');\n  let hasLoaded = false;\n\n  $effect(() => {\n    if (!browser || hasLoaded) return;\n    hasLoaded = true;\n\n    loadSongs();\n  });\n\n  async function loadSongs() {\n    try {\n      const { SongRepository } = await import('@gigwidget/db');\n      const { getDatabase } = await import('@gigwidget/db');\n      const db = getDatabase();\n\n      // Get current user\n      const users = await db.users.toArray();\n      if (users.length > 0) {\n        songs = await SongRepository.getByOwner(users[0].id);\n      }\n    } catch (err) {\n      console.error('Failed to load songs:', err);\n    } finally {\n      loading = false;\n    }\n  }\n\n  async function handleSearch() {\n    if (!searchQuery.trim()) {\n      await loadSongs();\n      return;\n    }\n\n    try {\n      const { SongRepository } = await import('@gigwidget/db');\n      songs = await SongRepository.search(searchQuery);\n    } catch (err) {\n      console.error('Failed to search songs:', err);\n    }\n  }\n\n  function formatDate(date: Date): string {\n    return new Intl.DateTimeFormat('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    }).format(date);\n  }\n</script>\n\n<svelte:head>\n  <title>My Songs - Gigwidget</title>\n</svelte:head>\n\n<main class=\"container\">\n  <header class=\"page-header\">\n    <div class=\"header-left\">\n      <a href=\"/\" class=\"back-link\">‚Üê Home</a>\n      <h1>My Songs</h1>\n    </div>\n    <a href=\"/songs/new\" class=\"btn btn-primary\">+ New Song</a>\n  </header>\n\n  <section class=\"search-section\">\n    <div class=\"search-bar\">\n      <input\n        type=\"search\"\n        placeholder=\"Search by title, artist, or tag...\"\n        bind:value={searchQuery}\n        oninput={handleSearch}\n      />\n    </div>\n  </section>\n\n  {#if loading}\n    <div class=\"loading\">Loading songs...</div>\n  {:else if songs.length === 0}\n    <div class=\"empty-state\">\n      {#if searchQuery}\n        <p>No songs found matching \"{searchQuery}\"</p>\n        <button class=\"btn btn-secondary\" onclick={() => { searchQuery = ''; loadSongs(); }}>\n          Clear search\n        </button>\n      {:else}\n        <p>No songs yet. Create your first song to get started!</p>\n        <a href=\"/songs/new\" class=\"btn btn-primary\">Create Song</a>\n      {/if}\n    </div>\n  {:else}\n    <ul class=\"song-list\">\n      {#each songs as song (song.id)}\n        <li class=\"song-item\">\n          <a href=\"/songs/{song.id}\" class=\"song-link\">\n            <div class=\"song-info\">\n              <span class=\"song-title\">{song.title}</span>\n              {#if song.artist}\n                <span class=\"song-artist\">{song.artist}</span>\n              {/if}\n              <span class=\"song-date\">Updated {formatDate(song.updatedAt)}</span>\n            </div>\n            <div class=\"song-meta\">\n              {#if song.key}\n                <span class=\"song-key\">{song.key}</span>\n              {/if}\n              {#if song.tempo}\n                <span class=\"song-tempo\">{song.tempo} BPM</span>\n              {/if}\n              {#if song.tags.length > 0}\n                <div class=\"song-tags\">\n                  {#each song.tags.slice(0, 3) as tag}\n                    <span class=\"tag\">{tag}</span>\n                  {/each}\n                  {#if song.tags.length > 3}\n                    <span class=\"tag tag-more\">+{song.tags.length - 3}</span>\n                  {/if}\n                </div>\n              {/if}\n            </div>\n          </a>\n        </li>\n      {/each}\n    </ul>\n  {/if}\n</main>\n\n<style>\n  .page-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    padding: var(--spacing-lg) 0;\n    border-bottom: 1px solid var(--color-border);\n  }\n\n  .header-left {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-sm);\n  }\n\n  .back-link {\n    font-size: 0.875rem;\n    color: var(--color-text-muted);\n  }\n\n  .back-link:hover {\n    color: var(--color-primary);\n  }\n\n  .search-section {\n    padding: var(--spacing-lg) 0;\n  }\n\n  .search-bar input {\n    width: 100%;\n    max-width: 400px;\n  }\n\n  .loading {\n    text-align: center;\n    padding: var(--spacing-xl);\n    color: var(--color-text-muted);\n  }\n\n  .empty-state {\n    text-align: center;\n    padding: var(--spacing-xl);\n    background-color: var(--color-bg-secondary);\n    border-radius: var(--radius-lg);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: var(--spacing-md);\n  }\n\n  .empty-state p {\n    color: var(--color-text-muted);\n  }\n\n  .song-list {\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-sm);\n  }\n\n  .song-item {\n    background-color: var(--color-bg-secondary);\n    border-radius: var(--radius-md);\n    transition: background-color var(--transition-fast);\n  }\n\n  .song-item:hover {\n    background-color: var(--color-surface);\n  }\n\n  .song-link {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: var(--spacing-md);\n    color: inherit;\n    text-decoration: none;\n  }\n\n  .song-info {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-xs);\n  }\n\n  .song-title {\n    font-weight: 500;\n    font-size: 1.1rem;\n  }\n\n  .song-artist {\n    font-size: 0.875rem;\n    color: var(--color-text-muted);\n  }\n\n  .song-date {\n    font-size: 0.75rem;\n    color: var(--color-text-muted);\n  }\n\n  .song-meta {\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-sm);\n  }\n\n  .song-key {\n    background-color: var(--color-secondary);\n    padding: var(--spacing-xs) var(--spacing-sm);\n    border-radius: var(--radius-sm);\n    font-size: 0.75rem;\n    font-weight: 500;\n  }\n\n  .song-tempo {\n    font-size: 0.75rem;\n    color: var(--color-text-muted);\n  }\n\n  .song-tags {\n    display: flex;\n    gap: var(--spacing-xs);\n  }\n\n  .tag {\n    background-color: var(--color-surface);\n    padding: var(--spacing-xs) var(--spacing-sm);\n    border-radius: var(--radius-sm);\n    font-size: 0.7rem;\n    color: var(--color-text-muted);\n  }\n\n  .tag-more {\n    font-style: italic;\n  }\n\n  @media (max-width: 600px) {\n    .song-link {\n      flex-direction: column;\n      align-items: flex-start;\n      gap: var(--spacing-sm);\n    }\n\n    .song-meta {\n      flex-wrap: wrap;\n    }\n  }\n</style>\n"],"file":"_app/immutable/nodes/9.DIPdqpaM.js"}