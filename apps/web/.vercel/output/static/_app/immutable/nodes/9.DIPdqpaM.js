const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DhSYb-d6.js","../chunks/Cpj98o6Y.js","../chunks/CDUSxSYR.js","../chunks/CKx7fsl1.js"])))=>i.map(i=>d[i]);
import{V as pa,W as F,c as ca,X as _a,Z as s,b as a,Y as da,_ as M,s as E,x as ma,a0 as p,$ as fa,a1 as e,a3 as X,a2 as y,a4 as ua}from"../chunks/cnc2SBSL.js";import{d as ga,f as i,a as n,c as ha,s as m}from"../chunks/Caf-0pf-.js";import{i as f,b as ya}from"../chunks/Coh7MiEg.js";import{h as ba,e as Y,i as wa}from"../chunks/ClOXSIRR.js";import{r as xa,s as Sa}from"../chunks/L9orpk0O.js";import{b as ka}from"../chunks/_dvcZOuR.js";var Da=i('<div class="loading svelte-14p7rtl">Loading songs...</div>'),Ra=i('<p class="svelte-14p7rtl"> </p> <button class="btn btn-secondary">Clear search</button>',1),Ea=i('<p class="svelte-14p7rtl">No songs yet. Create your first song to get started!</p> <a href="/songs/new" class="btn btn-primary">Create Song</a>',1),Aa=i('<div class="empty-state svelte-14p7rtl"><!></div>'),La=i('<span class="song-artist svelte-14p7rtl"> </span>'),Pa=i('<span class="song-key svelte-14p7rtl"> </span>'),Ia=i('<span class="song-tempo svelte-14p7rtl"> </span>'),Oa=i('<span class="tag svelte-14p7rtl"> </span>'),Ta=i('<span class="tag tag-more svelte-14p7rtl"> </span>'),Va=i('<div class="song-tags svelte-14p7rtl"><!> <!></div>'),Ca=i('<li class="song-item svelte-14p7rtl"><a class="song-link svelte-14p7rtl"><div class="song-info svelte-14p7rtl"><span class="song-title svelte-14p7rtl"> </span> <!> <span class="song-date svelte-14p7rtl"> </span></div> <div class="song-meta svelte-14p7rtl"><!> <!> <!></div></a></li>'),Fa=i('<ul class="song-list svelte-14p7rtl"></ul>'),Ma=i('<main class="container"><header class="page-header svelte-14p7rtl"><div class="header-left svelte-14p7rtl"><a href="/" class="back-link svelte-14p7rtl">‚Üê Home</a> <h1>My Songs</h1></div> <a href="/songs/new" class="btn btn-primary">+ New Song</a></header> <section class="search-section svelte-14p7rtl"><div class="search-bar svelte-14p7rtl"><input type="search" placeholder="Search by title, artist, or tag..." class="svelte-14p7rtl"/></div></section> <!></main>');function Qa(Z,j){pa(j,!0);let A=F(ca([])),N=F(!0),u=F(""),$=!1;_a(()=>{!ya||$||($=!0,I())});async function I(){try{const{SongRepository:t}=await M(async()=>{const{SongRepository:w}=await import("../chunks/DhSYb-d6.js");return{SongRepository:w}},__vite__mapDeps([0,1,2,3]),import.meta.url),{getDatabase:c}=await M(async()=>{const{getDatabase:w}=await import("../chunks/DhSYb-d6.js");return{getDatabase:w}},__vite__mapDeps([0,1,2,3]),import.meta.url),L=await c().users.toArray();L.length>0&&E(A,await t.getByOwner(L[0].id),!0)}catch(t){console.error("Failed to load songs:",t)}finally{E(N,!1)}}async function q(){if(!a(u).trim()){await I();return}try{const{SongRepository:t}=await M(async()=>{const{SongRepository:c}=await import("../chunks/DhSYb-d6.js");return{SongRepository:c}},__vite__mapDeps([0,1,2,3]),import.meta.url);E(A,await t.search(a(u)),!0)}catch(t){console.error("Failed to search songs:",t)}}function z(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)}var O=Ma();ba("14p7rtl",t=>{ma(()=>{fa.title="My Songs - Gigwidget"})});var T=p(s(O),2),B=s(T),V=s(B);xa(V),V.__input=q,e(B),e(T);var J=p(T,2);{var K=t=>{var c=Da();n(t,c)},aa=t=>{var c=ha(),U=X(c);{var L=b=>{var g=Aa(),x=s(g);{var o=v=>{var _=Ra(),h=X(_),C=s(h);e(h);var P=p(h,2);P.__click=()=>{E(u,""),I()},y(()=>m(C,`No songs found matching "${a(u)??""}"`)),n(v,_)},S=v=>{var _=Ea();ua(2),n(v,_)};f(x,v=>{a(u)?v(o):v(S,!1)})}e(g),n(b,g)},w=b=>{var g=Fa();Y(g,21,()=>a(A),x=>x.id,(x,o)=>{var S=Ca(),v=s(S),_=s(v),h=s(_),C=s(h,!0);e(h);var P=p(h,2);{var ta=r=>{var l=La(),d=s(l,!0);e(l),y(()=>m(d,a(o).artist)),n(r,l)};f(P,r=>{a(o).artist&&r(ta)})}var G=p(P,2),ea=s(G);e(G),e(_);var H=p(_,2),Q=s(H);{var ra=r=>{var l=Pa(),d=s(l,!0);e(l),y(()=>m(d,a(o).key)),n(r,l)};f(Q,r=>{a(o).key&&r(ra)})}var W=p(Q,2);{var sa=r=>{var l=Ia(),d=s(l);e(l),y(()=>m(d,`${a(o).tempo??""} BPM`)),n(r,l)};f(W,r=>{a(o).tempo&&r(sa)})}var oa=p(W,2);{var la=r=>{var l=Va(),d=s(l);Y(d,17,()=>a(o).tags.slice(0,3),wa,(k,D)=>{var R=Oa(),va=s(R,!0);e(R),y(()=>m(va,a(D))),n(k,R)});var na=p(d,2);{var ia=k=>{var D=Ta(),R=s(D);e(D),y(()=>m(R,`+${a(o).tags.length-3}`)),n(k,D)};f(na,k=>{a(o).tags.length>3&&k(ia)})}e(l),n(r,l)};f(oa,r=>{a(o).tags.length>0&&r(la)})}e(H),e(v),e(S),y(r=>{Sa(v,"href",`/songs/${a(o).id??""}`),m(C,a(o).title),m(ea,`Updated ${r??""}`)},[()=>z(a(o).updatedAt)]),n(x,S)}),e(g),n(b,g)};f(U,b=>{a(A).length===0?b(L):b(w,!1)},!0)}n(t,c)};f(J,t=>{a(N)?t(K):t(aa,!1)})}e(O),ka(V,()=>a(u),t=>E(u,t)),n(Z,O),da()}ga(["input","click"]);export{Qa as component};
//# sourceMappingURL=9.DIPdqpaM.js.map
