const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DhSYb-d6.js","../chunks/Cpj98o6Y.js","../chunks/CDUSxSYR.js","../chunks/CKx7fsl1.js","../chunks/BMDA9hg8.js","../chunks/BhPu-S6K.js","../chunks/Dyjw1x4N.js"])))=>i.map(i=>d[i]);
import{V as Ie,W as f,c as Ae,X as Ee,a3 as oe,s as i,a0 as r,Y as Ge,_ as z,x as xe,Z as a,$ as Ce,a1 as t,b as e,a4 as le,a2 as Q}from"../chunks/cnc2SBSL.js";import{d as ke,f as y,a as _,c as Se,s as w,e as Be}from"../chunks/Caf-0pf-.js";import{i as L,b as Te}from"../chunks/Coh7MiEg.js";import{h as Ne,e as te,i as ve}from"../chunks/ClOXSIRR.js";import{r as J}from"../chunks/L9orpk0O.js";import{s as Pe}from"../chunks/oTU1mMgh.js";import{b as ae,a as Re}from"../chunks/_dvcZOuR.js";import{b as Oe}from"../chunks/OTSxomT-.js";import{I as Fe}from"../chunks/BhPu-S6K.js";var Le=y('<div class="loading svelte-1r05oy5">Loading instruments...</div>'),Ue=y('<div class="empty-state svelte-1r05oy5"><p class="svelte-1r05oy5">No custom instruments yet. Create one to use custom tunings in your chord diagrams!</p> <button class="btn btn-primary">Create Instrument</button></div>'),Ve=y('<span class="public-badge svelte-1r05oy5">Shared in sessions</span>'),Me=y('<div class="instrument-card svelte-1r05oy5"><div class="instrument-header svelte-1r05oy5"><h3 class="instrument-name svelte-1r05oy5"> </h3> <span class="base-type svelte-1r05oy5"> </span></div> <div class="instrument-details svelte-1r05oy5"><div class="detail-row svelte-1r05oy5"><span class="detail-label svelte-1r05oy5">Tuning:</span> <span class="detail-value tuning svelte-1r05oy5"> </span></div> <div class="detail-row svelte-1r05oy5"><span class="detail-label svelte-1r05oy5">Frets:</span> <span class="detail-value"> </span></div> <div class="detail-row svelte-1r05oy5"><span class="detail-label svelte-1r05oy5">Strings:</span> <span class="detail-value"> </span></div></div> <!> <div class="instrument-actions svelte-1r05oy5"><button class="btn btn-danger btn-sm svelte-1r05oy5">Delete</button></div></div>'),qe=y('<div class="instruments-grid svelte-1r05oy5"></div>'),je=y('<div class="error-message svelte-1r05oy5"> </div>'),Ye=y("<option> </option>"),He=y('<button type="button"> </button>'),Qe=y('<div class="form-group svelte-1r05oy5"><label class="svelte-1r05oy5">Quick Tunings</label> <div class="tuning-buttons svelte-1r05oy5"></div></div>'),We=y('<div class="modal-overlay svelte-1r05oy5"><div class="modal svelte-1r05oy5"><h2 class="svelte-1r05oy5">Create Custom Instrument</h2> <!> <form><div class="form-group svelte-1r05oy5"><label for="instrument-name" class="svelte-1r05oy5">Name *</label> <input type="text" id="instrument-name" placeholder="e.g., Drop D Guitar, 7-String" required/></div> <div class="form-group svelte-1r05oy5"><label for="base-type" class="svelte-1r05oy5">Base Instrument</label> <select id="base-type" class="svelte-1r05oy5"></select></div> <!> <div class="form-group svelte-1r05oy5"><label for="strings" class="svelte-1r05oy5">String Tuning (comma-separated, low to high) *</label> <input type="text" id="strings" placeholder="E2,A2,D3,G3,B3,E4" required/> <span class="help-text svelte-1r05oy5">Use note names with octave numbers (e.g., E2, A2, D3)</span></div> <div class="form-group svelte-1r05oy5"><label for="frets" class="svelte-1r05oy5">Number of Frets</label> <input type="number" id="frets" min="12" max="30"/></div> <div class="form-group checkbox-group svelte-1r05oy5"><label class="svelte-1r05oy5"><input type="checkbox" class="svelte-1r05oy5"/> Share in P2P sessions (others can use this instrument temporarily)</label></div> <div class="modal-actions svelte-1r05oy5"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),Xe=y('<main class="container"><header class="page-header svelte-1r05oy5"><div class="header-left svelte-1r05oy5"><a href="/" class="back-link svelte-1r05oy5">‚Üê Home</a> <h1>Custom Instruments</h1> <p class="subtitle svelte-1r05oy5">Create instruments with custom tunings for chord diagrams</p></div> <button class="btn btn-primary">+ New Instrument</button></header> <!></main> <!>',1);function rt(de,ue){Ie(ue,!0);let E=f(Ae([])),se=f(!0),re=!1,C=f(!1),k=f(""),S=f("guitar"),B=f("E2,A2,D3,G3,B3,E4"),W=f(22),X=f(!1),b=f(!1),T=f(null);const ne={guitar:[{name:"Standard",strings:"E2,A2,D3,G3,B3,E4"},{name:"Drop D",strings:"D2,A2,D3,G3,B3,E4"},{name:"Open G",strings:"D2,G2,D3,G3,B3,D4"},{name:"DADGAD",strings:"D2,A2,D3,G3,A3,D4"},{name:"Open D",strings:"D2,A2,D3,F#3,A3,D4"}],bass:[{name:"Standard 4-string",strings:"E1,A1,D2,G2"},{name:"Standard 5-string",strings:"B0,E1,A1,D2,G2"},{name:"Drop D",strings:"D1,A1,D2,G2"}],ukulele:[{name:"Standard (GCEA)",strings:"G4,C4,E4,A4"},{name:"Baritone (DGBE)",strings:"D3,G3,B3,E4"}],banjo:[{name:"Standard 5-string",strings:"G4,D3,G3,B3,D4"},{name:"Open G",strings:"G4,D3,G3,B3,D4"}],mandolin:[{name:"Standard",strings:"G3,D4,A4,E5"}]};Ee(()=>{!Te||re||(re=!0,ce())});async function ce(){try{const{CustomInstrumentRepository:n,getDatabase:o}=await z(async()=>{const{CustomInstrumentRepository:N,getDatabase:l}=await import("../chunks/DhSYb-d6.js");return{CustomInstrumentRepository:N,getDatabase:l}},__vite__mapDeps([0,1,2,3]),import.meta.url),h=await o().users.toArray();h.length>0&&i(E,await n.getByUser(h[0].id),!0)}catch(n){console.error("Failed to load instruments:",n)}finally{i(se,!1)}}function me(n){i(B,n.strings,!0)}async function pe(){if(i(T,null),!e(k).trim()){i(T,"Name is required");return}const n=e(B).split(",").map(o=>o.trim());if(n.length<1||n.some(o=>!o)){i(T,"Invalid string tuning format");return}i(b,!0);try{const{CustomInstrumentRepository:o,getDatabase:p}=await z(async()=>{const{CustomInstrumentRepository:u,getDatabase:c}=await import("../chunks/DhSYb-d6.js");return{CustomInstrumentRepository:u,getDatabase:c}},__vite__mapDeps([0,1,2,3]),import.meta.url),{generateId:h}=await z(async()=>{const{generateId:u}=await import("../chunks/BMDA9hg8.js");return{generateId:u}},__vite__mapDeps([4,5,2,3,6]),import.meta.url),l=await p().users.toArray();if(l.length===0)return;const v={id:h(),userId:l[0].id,name:e(k).trim(),baseType:e(S),strings:n,frets:e(W),isPublic:e(X),createdAt:new Date,updatedAt:new Date};await o.create(v),i(E,[...e(E),v],!0),i(k,""),i(S,"guitar"),i(B,"E2,A2,D3,G3,B3,E4"),i(W,22),i(X,!1),i(C,!1)}catch(o){console.error("Failed to create instrument:",o),i(T,"Failed to create instrument")}finally{i(b,!1)}}async function _e(n){if(confirm("Delete this instrument? Your fingerings for it will also be deleted."))try{const{CustomInstrumentRepository:o}=await z(async()=>{const{CustomInstrumentRepository:p}=await import("../chunks/DhSYb-d6.js");return{CustomInstrumentRepository:p}},__vite__mapDeps([0,1,2,3]),import.meta.url);await o.delete(n),i(E,e(E).filter(p=>p.id!==n),!0)}catch(o){console.error("Failed to delete instrument:",o)}}function be(n){return n.join(" - ")}var ie=Xe();Ne("1r05oy5",n=>{xe(()=>{Ce.title="Custom Instruments - Gigwidget"})});var K=oe(ie),$=a(K),ye=r(a($),2);ye.__click=()=>i(C,!0),t($);var ge=r($,2);{var fe=n=>{var o=Le();_(n,o)},he=n=>{var o=Se(),p=oe(o);{var h=l=>{var v=Ue(),u=r(a(v),2);u.__click=()=>i(C,!0),t(v),_(l,v)},N=l=>{var v=qe();te(v,21,()=>e(E),u=>u.id,(u,c)=>{var I=Me(),P=a(I),U=a(P),V=a(U,!0);t(U);var R=r(U,2),M=a(R,!0);t(R),t(P);var G=r(P,2),x=a(G),q=r(a(x),2),j=a(q,!0);t(q),t(x);var O=r(x,2),F=r(a(O),2),Y=a(F,!0);t(F),t(O);var Z=r(O,2),s=r(a(Z),2),d=a(s,!0);t(s),t(Z),t(G);var m=r(G,2);{var H=A=>{var ee=Ve();_(A,ee)};L(m,A=>{e(c).isPublic&&A(H)})}var D=r(m,2),g=a(D);g.__click=()=>_e(e(c).id),t(D),t(I),Q(A=>{w(V,e(c).name),w(M,e(c).baseType),w(j,A),w(Y,e(c).frets),w(d,e(c).strings.length)},[()=>be(e(c).strings)]),_(u,I)}),t(v),_(l,v)};L(p,l=>{e(E).length===0?l(h):l(N,!1)},!0)}_(n,o)};L(ge,n=>{e(se)?n(fe):n(he,!1)})}t(K);var De=r(K,2);{var we=n=>{var o=We();o.__click=()=>i(C,!1);var p=a(o);p.__click=s=>s.stopPropagation();var h=r(a(p),2);{var N=s=>{var d=je(),m=a(d,!0);t(d),Q(()=>w(m,e(T))),_(s,d)};L(h,s=>{e(T)&&s(N)})}var l=r(h,2),v=a(l),u=r(a(v),2);J(u),t(v);var c=r(v,2),I=r(a(c),2);te(I,21,()=>Fe,ve,(s,d)=>{var m=Ye(),H=a(m,!0);t(m);var D={};Q(g=>{w(H,g),D!==(D=e(d))&&(m.value=(m.__value=e(d))??"")},[()=>e(d).charAt(0).toUpperCase()+e(d).slice(1)]),_(s,m)}),t(I),t(c);var P=r(c,2);{var U=s=>{var d=Qe(),m=r(a(d),2);te(m,21,()=>ne[e(S)],ve,(H,D)=>{var g=He();let A;g.__click=()=>me(e(D));var ee=a(g,!0);t(g),Q(()=>{A=Pe(g,1,"tuning-btn svelte-1r05oy5",null,A,{active:e(B)===e(D).strings}),g.disabled=e(b),w(ee,e(D).name)}),_(H,g)}),t(m),t(d),_(s,d)};L(P,s=>{ne[e(S)]&&s(U)})}var V=r(P,2),R=r(a(V),2);J(R),le(2),t(V);var M=r(V,2),G=r(a(M),2);J(G),t(M);var x=r(M,2),q=a(x),j=a(q);J(j),le(),t(q),t(x);var O=r(x,2),F=a(O);F.__click=()=>i(C,!1);var Y=r(F,2),Z=a(Y,!0);t(Y),t(O),t(l),t(p),t(o),Q(s=>{u.disabled=e(b),I.disabled=e(b),R.disabled=e(b),G.disabled=e(b),j.disabled=e(b),F.disabled=e(b),Y.disabled=s,w(Z,e(b)?"Creating...":"Create Instrument")},[()=>e(b)||!e(k).trim()]),Be("submit",l,s=>{s.preventDefault(),pe()}),ae(u,()=>e(k),s=>i(k,s)),Oe(I,()=>e(S),s=>i(S,s)),ae(R,()=>e(B),s=>i(B,s)),ae(G,()=>e(W),s=>i(W,s)),Re(j,()=>e(X),s=>i(X,s)),_(n,o)};L(De,n=>{e(C)&&n(we)})}_(de,ie),Ge()}ke(["click"]);export{rt as component};
//# sourceMappingURL=5.CQ76Gn_0.js.map
