{"version":3,"mappings":"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","names":["sets","$.state","$.proxy","songs","loading","hasLoaded","showCreateModal","newSetName","newSetDescription","newSetIsSetlist","creating","$.user_effect","browser","loadData","SongSetRepository","SongRepository","getDatabase","users","err","$.set","createSet","$.get","__vitePreload","generateId","newSet","deleteSet","setId","s","getSongCount","set","formatDate","date","$.head","$$anchor","main","$.first_child","fragment","header","button","div","root_2","div_1","root_4","button_1","div_2","root_5","div_3","root_6","div_4","h3","span","root_7","$$render","consequent_2","p","root_8","$.template_effect","$.set_text","text_1","consequent_3","div_5","$.sibling","node_3","span_1","span_2","div_6","a","button_2","classes","text","consequent_1","alternate","consequent","alternate_1","div_7","root_9","div_8","e","form","div_9","input","$.child","$.remove_input_defaults","div_10","textarea","$.remove_textarea_child","div_11","label","input_1","div_12","button_3","button_4","$0","$$value","consequent_4"],"ignoreList":[],"sources":["../../../../../../src/routes/sets/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { browser } from '$app/environment';\n  import type { SongSet, Song } from '@gigwidget/core';\n\n  let sets = $state<SongSet[]>([]);\n  let songs = $state<Song[]>([]);\n  let loading = $state(true);\n  let hasLoaded = false;\n  let showCreateModal = $state(false);\n  let newSetName = $state('');\n  let newSetDescription = $state('');\n  let newSetIsSetlist = $state(false);\n  let creating = $state(false);\n\n  $effect(() => {\n    if (!browser || hasLoaded) return;\n    hasLoaded = true;\n    loadData();\n  });\n\n  async function loadData() {\n    try {\n      const { SongSetRepository, SongRepository, getDatabase } = await import('@gigwidget/db');\n      const db = getDatabase();\n\n      const users = await db.users.toArray();\n      if (users.length > 0) {\n        sets = await SongSetRepository.getByUser(users[0].id);\n        songs = await SongRepository.getByOwner(users[0].id);\n      }\n    } catch (err) {\n      console.error('Failed to load sets:', err);\n    } finally {\n      loading = false;\n    }\n  }\n\n  async function createSet() {\n    if (!newSetName.trim()) return;\n\n    creating = true;\n    try {\n      const { SongSetRepository, getDatabase } = await import('@gigwidget/db');\n      const { generateId } = await import('@gigwidget/core');\n      const db = getDatabase();\n\n      const users = await db.users.toArray();\n      if (users.length === 0) return;\n\n      const newSet: SongSet = {\n        id: generateId(),\n        userId: users[0].id,\n        name: newSetName.trim(),\n        description: newSetDescription.trim() || undefined,\n        songIds: [],\n        isSetlist: newSetIsSetlist,\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n\n      await SongSetRepository.create(newSet);\n      sets = [...sets, newSet];\n\n      // Reset form\n      newSetName = '';\n      newSetDescription = '';\n      newSetIsSetlist = false;\n      showCreateModal = false;\n    } catch (err) {\n      console.error('Failed to create set:', err);\n    } finally {\n      creating = false;\n    }\n  }\n\n  async function deleteSet(setId: string) {\n    if (!confirm('Delete this set? Songs will not be deleted.')) return;\n\n    try {\n      const { SongSetRepository } = await import('@gigwidget/db');\n      await SongSetRepository.delete(setId);\n      sets = sets.filter((s) => s.id !== setId);\n    } catch (err) {\n      console.error('Failed to delete set:', err);\n    }\n  }\n\n  function getSongCount(set: SongSet): number {\n    return set.songIds.length;\n  }\n\n  function formatDate(date: Date): string {\n    return new Intl.DateTimeFormat('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n    }).format(date);\n  }\n</script>\n\n<svelte:head>\n  <title>Song Sets - Gigwidget</title>\n</svelte:head>\n\n<main class=\"container\">\n  <header class=\"page-header\">\n    <div class=\"header-left\">\n      <a href=\"/\" class=\"back-link\">‚Üê Home</a>\n      <h1>Song Sets</h1>\n      <p class=\"subtitle\">Organize your songs into collections and setlists</p>\n    </div>\n    <button class=\"btn btn-primary\" onclick={() => (showCreateModal = true)}>+ New Set</button>\n  </header>\n\n  {#if loading}\n    <div class=\"loading\">Loading sets...</div>\n  {:else if sets.length === 0}\n    <div class=\"empty-state\">\n      <p>No sets yet. Create a set to organize your songs!</p>\n      <button class=\"btn btn-primary\" onclick={() => (showCreateModal = true)}>Create Set</button>\n    </div>\n  {:else}\n    <div class=\"sets-grid\">\n      {#each sets as set (set.id)}\n        <div class=\"set-card\" class:setlist={set.isSetlist}>\n          <div class=\"set-header\">\n            <h3 class=\"set-name\">{set.name}</h3>\n            {#if set.isSetlist}\n              <span class=\"setlist-badge\">Setlist</span>\n            {/if}\n          </div>\n          {#if set.description}\n            <p class=\"set-description\">{set.description}</p>\n          {/if}\n          <div class=\"set-meta\">\n            <span class=\"song-count\">{getSongCount(set)} song{getSongCount(set) !== 1 ? 's' : ''}</span>\n            <span class=\"set-date\">Updated {formatDate(set.updatedAt)}</span>\n          </div>\n          <div class=\"set-actions\">\n            <a href=\"/sets/{set.id}\" class=\"btn btn-secondary btn-sm\">View</a>\n            <button class=\"btn btn-danger btn-sm\" onclick={() => deleteSet(set.id)}>Delete</button>\n          </div>\n        </div>\n      {/each}\n    </div>\n  {/if}\n</main>\n\n{#if showCreateModal}\n  <div class=\"modal-overlay\" onclick={() => (showCreateModal = false)}>\n    <div class=\"modal\" onclick={(e) => e.stopPropagation()}>\n      <h2>Create New Set</h2>\n      <form onsubmit={(e) => { e.preventDefault(); createSet(); }}>\n        <div class=\"form-group\">\n          <label for=\"set-name\">Name *</label>\n          <input\n            type=\"text\"\n            id=\"set-name\"\n            bind:value={newSetName}\n            placeholder=\"e.g., Jazz Standards, Friday Gig\"\n            required\n            disabled={creating}\n          />\n        </div>\n\n        <div class=\"form-group\">\n          <label for=\"set-description\">Description</label>\n          <textarea\n            id=\"set-description\"\n            bind:value={newSetDescription}\n            placeholder=\"Optional description...\"\n            rows=\"2\"\n            disabled={creating}\n          ></textarea>\n        </div>\n\n        <div class=\"form-group checkbox-group\">\n          <label>\n            <input type=\"checkbox\" bind:checked={newSetIsSetlist} disabled={creating} />\n            This is a setlist (ordered for performance)\n          </label>\n        </div>\n\n        <div class=\"modal-actions\">\n          <button type=\"button\" class=\"btn btn-secondary\" onclick={() => (showCreateModal = false)} disabled={creating}>\n            Cancel\n          </button>\n          <button type=\"submit\" class=\"btn btn-primary\" disabled={creating || !newSetName.trim()}>\n            {creating ? 'Creating...' : 'Create Set'}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n{/if}\n\n<style>\n  .page-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    padding: var(--spacing-lg) 0;\n    border-bottom: 1px solid var(--color-border);\n  }\n\n  .header-left {\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-xs);\n  }\n\n  .back-link {\n    font-size: 0.875rem;\n    color: var(--color-text-muted);\n  }\n\n  .back-link:hover {\n    color: var(--color-primary);\n  }\n\n  .subtitle {\n    color: var(--color-text-muted);\n    font-size: 0.875rem;\n  }\n\n  .loading {\n    text-align: center;\n    padding: var(--spacing-xl);\n    color: var(--color-text-muted);\n  }\n\n  .empty-state {\n    text-align: center;\n    padding: var(--spacing-xl);\n    background-color: var(--color-bg-secondary);\n    border-radius: var(--radius-lg);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: var(--spacing-md);\n    margin-top: var(--spacing-xl);\n  }\n\n  .empty-state p {\n    color: var(--color-text-muted);\n  }\n\n  .sets-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n    gap: var(--spacing-md);\n    padding: var(--spacing-lg) 0;\n  }\n\n  .set-card {\n    background-color: var(--color-bg-secondary);\n    border-radius: var(--radius-lg);\n    padding: var(--spacing-md);\n    display: flex;\n    flex-direction: column;\n    gap: var(--spacing-sm);\n    transition: background-color var(--transition-fast);\n  }\n\n  .set-card:hover {\n    background-color: var(--color-surface);\n  }\n\n  .set-card.setlist {\n    border-left: 3px solid var(--color-primary);\n  }\n\n  .set-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: var(--spacing-sm);\n  }\n\n  .set-name {\n    font-size: 1.1rem;\n    font-weight: 500;\n    margin: 0;\n  }\n\n  .setlist-badge {\n    background-color: var(--color-primary);\n    color: white;\n    padding: var(--spacing-xs) var(--spacing-sm);\n    border-radius: var(--radius-sm);\n    font-size: 0.7rem;\n    font-weight: 600;\n    text-transform: uppercase;\n  }\n\n  .set-description {\n    color: var(--color-text-muted);\n    font-size: 0.875rem;\n    margin: 0;\n  }\n\n  .set-meta {\n    display: flex;\n    justify-content: space-between;\n    font-size: 0.75rem;\n    color: var(--color-text-muted);\n  }\n\n  .set-actions {\n    display: flex;\n    gap: var(--spacing-sm);\n    margin-top: var(--spacing-sm);\n  }\n\n  .btn-sm {\n    padding: var(--spacing-xs) var(--spacing-sm);\n    font-size: 0.75rem;\n  }\n\n  .btn-danger {\n    background-color: transparent;\n    border: 1px solid var(--color-primary);\n    color: var(--color-primary);\n  }\n\n  .btn-danger:hover {\n    background-color: var(--color-primary);\n    color: white;\n  }\n\n  /* Modal */\n  .modal-overlay {\n    position: fixed;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.7);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 100;\n    padding: var(--spacing-md);\n  }\n\n  .modal {\n    background-color: var(--color-bg);\n    border-radius: var(--radius-lg);\n    padding: var(--spacing-lg);\n    width: 100%;\n    max-width: 400px;\n  }\n\n  .modal h2 {\n    margin: 0 0 var(--spacing-lg);\n  }\n\n  .form-group {\n    margin-bottom: var(--spacing-md);\n  }\n\n  .form-group label {\n    display: block;\n    margin-bottom: var(--spacing-xs);\n    font-size: 0.875rem;\n    color: var(--color-text-muted);\n  }\n\n  .checkbox-group label {\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-sm);\n    cursor: pointer;\n  }\n\n  .checkbox-group input[type='checkbox'] {\n    width: auto;\n  }\n\n  textarea {\n    resize: vertical;\n    min-height: 60px;\n  }\n\n  .modal-actions {\n    display: flex;\n    justify-content: flex-end;\n    gap: var(--spacing-sm);\n    margin-top: var(--spacing-lg);\n  }\n</style>\n"],"file":"_app/immutable/nodes/7.DuLYKynO.js"}