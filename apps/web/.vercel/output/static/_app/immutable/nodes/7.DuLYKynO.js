const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DhSYb-d6.js","../chunks/Cpj98o6Y.js","../chunks/CDUSxSYR.js","../chunks/CKx7fsl1.js","../chunks/BMDA9hg8.js","../chunks/BhPu-S6K.js","../chunks/Dyjw1x4N.js"])))=>i.map(i=>d[i]);
import{V as _t,W as m,c as Y,X as mt,a3 as Z,s as r,a0 as n,Y as gt,_ as P,x as ht,Z as s,$ as yt,a1 as a,b as t,a6 as St,a4 as wt,a2 as U}from"../chunks/cnc2SBSL.js";import{d as Dt,f as g,a as p,c as xt,s as C,e as kt}from"../chunks/Caf-0pf-.js";import{i as E,b as Rt}from"../chunks/Coh7MiEg.js";import{h as It,e as At}from"../chunks/ClOXSIRR.js";import{r as j,s as Ct}from"../chunks/L9orpk0O.js";import{s as Et}from"../chunks/oTU1mMgh.js";import{b as K,a as Ot}from"../chunks/_dvcZOuR.js";var Lt=g('<div class="loading svelte-1t3vfb6">Loading sets...</div>'),Pt=g('<div class="empty-state svelte-1t3vfb6"><p class="svelte-1t3vfb6">No sets yet. Create a set to organize your songs!</p> <button class="btn btn-primary">Create Set</button></div>'),Tt=g('<span class="setlist-badge svelte-1t3vfb6">Setlist</span>'),Vt=g('<p class="set-description svelte-1t3vfb6"> </p>'),Ft=g('<div><div class="set-header svelte-1t3vfb6"><h3 class="set-name svelte-1t3vfb6"> </h3> <!></div> <!> <div class="set-meta svelte-1t3vfb6"><span class="song-count"> </span> <span class="set-date"> </span></div> <div class="set-actions svelte-1t3vfb6"><a class="btn btn-secondary btn-sm svelte-1t3vfb6">View</a> <button class="btn btn-danger btn-sm svelte-1t3vfb6">Delete</button></div></div>'),Nt=g('<div class="sets-grid svelte-1t3vfb6"></div>'),zt=g('<div class="modal-overlay svelte-1t3vfb6"><div class="modal svelte-1t3vfb6"><h2 class="svelte-1t3vfb6">Create New Set</h2> <form><div class="form-group svelte-1t3vfb6"><label for="set-name" class="svelte-1t3vfb6">Name *</label> <input type="text" id="set-name" placeholder="e.g., Jazz Standards, Friday Gig" required/></div> <div class="form-group svelte-1t3vfb6"><label for="set-description" class="svelte-1t3vfb6">Description</label> <textarea id="set-description" placeholder="Optional description..." rows="2" class="svelte-1t3vfb6"></textarea></div> <div class="form-group checkbox-group svelte-1t3vfb6"><label class="svelte-1t3vfb6"><input type="checkbox" class="svelte-1t3vfb6"/> This is a setlist (ordered for performance)</label></div> <div class="modal-actions svelte-1t3vfb6"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),$t=g('<main class="container"><header class="page-header svelte-1t3vfb6"><div class="header-left svelte-1t3vfb6"><a href="/" class="back-link svelte-1t3vfb6">‚Üê Home</a> <h1>Song Sets</h1> <p class="subtitle svelte-1t3vfb6">Organize your songs into collections and setlists</p></div> <button class="btn btn-primary">+ New Set</button></header> <!></main> <!>',1);function Wt(Q,tt){_t(tt,!0);let h=m(Y([])),et=m(Y([])),B=m(!0),G=!1,x=m(!1),k=m(""),O=m(""),L=m(!1),_=m(!1);mt(()=>{!Rt||G||(G=!0,at())});async function at(){try{const{SongSetRepository:e,SongRepository:i,getDatabase:d}=await P(async()=>{const{SongSetRepository:l,SongRepository:o,getDatabase:c}=await import("../chunks/DhSYb-d6.js");return{SongSetRepository:l,SongRepository:o,getDatabase:c}},__vite__mapDeps([0,1,2,3]),import.meta.url),b=await d().users.toArray();b.length>0&&(r(h,await e.getByUser(b[0].id),!0),r(et,await i.getByOwner(b[0].id),!0))}catch(e){console.error("Failed to load sets:",e)}finally{r(B,!1)}}async function st(){if(t(k).trim()){r(_,!0);try{const{SongSetRepository:e,getDatabase:i}=await P(async()=>{const{SongSetRepository:o,getDatabase:c}=await import("../chunks/DhSYb-d6.js");return{SongSetRepository:o,getDatabase:c}},__vite__mapDeps([0,1,2,3]),import.meta.url),{generateId:d}=await P(async()=>{const{generateId:o}=await import("../chunks/BMDA9hg8.js");return{generateId:o}},__vite__mapDeps([4,5,2,3,6]),import.meta.url),b=await i().users.toArray();if(b.length===0)return;const l={id:d(),userId:b[0].id,name:t(k).trim(),description:t(O).trim()||void 0,songIds:[],isSetlist:t(L),createdAt:new Date,updatedAt:new Date};await e.create(l),r(h,[...t(h),l],!0),r(k,""),r(O,""),r(L,!1),r(x,!1)}catch(e){console.error("Failed to create set:",e)}finally{r(_,!1)}}}async function rt(e){if(confirm("Delete this set? Songs will not be deleted."))try{const{SongSetRepository:i}=await P(async()=>{const{SongSetRepository:d}=await import("../chunks/DhSYb-d6.js");return{SongSetRepository:d}},__vite__mapDeps([0,1,2,3]),import.meta.url);await i.delete(e),r(h,t(h).filter(d=>d.id!==e),!0)}catch(i){console.error("Failed to delete set:",i)}}function q(e){return e.songIds.length}function it(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}var H=$t();It("1t3vfb6",e=>{ht(()=>{yt.title="Song Sets - Gigwidget"})});var T=Z(H),V=s(T),ot=n(s(V),2);ot.__click=()=>r(x,!0),a(V);var nt=n(V,2);{var lt=e=>{var i=Lt();p(e,i)},vt=e=>{var i=xt(),d=Z(i);{var y=l=>{var o=Pt(),c=n(s(o),2);c.__click=()=>r(x,!0),a(o),p(l,o)},b=l=>{var o=Nt();At(o,21,()=>t(h),c=>c.id,(c,v)=>{var S=Ft();let R;var I=s(S),w=s(I),A=s(w,!0);a(w);var F=n(w,2);{var f=u=>{var D=Tt();p(u,D)};E(F,u=>{t(v).isSetlist&&u(f)})}a(I);var J=n(I,2);{var ft=u=>{var D=Vt(),$=s(D,!0);a(D),U(()=>C($,t(v).description)),p(u,D)};E(J,u=>{t(v).description&&u(ft)})}var N=n(J,2),z=s(N),bt=s(z);a(z);var M=n(z,2),ut=s(M);a(M),a(N);var W=n(N,2),X=s(W),pt=n(X,2);pt.__click=()=>rt(t(v).id),a(W),a(S),U((u,D,$)=>{R=Et(S,1,"set-card svelte-1t3vfb6",null,R,{setlist:t(v).isSetlist}),C(A,t(v).name),C(bt,`${u??""} song${D??""}`),C(ut,`Updated ${$??""}`),Ct(X,"href",`/sets/${t(v).id??""}`)},[()=>q(t(v)),()=>q(t(v))!==1?"s":"",()=>it(t(v).updatedAt)]),p(c,S)}),a(o),p(l,o)};E(d,l=>{t(h).length===0?l(y):l(b,!1)},!0)}p(e,i)};E(nt,e=>{t(B)?e(lt):e(vt,!1)})}a(T);var dt=n(T,2);{var ct=e=>{var i=zt();i.__click=()=>r(x,!1);var d=s(i);d.__click=f=>f.stopPropagation();var y=n(s(d),2),b=s(y),l=n(s(b),2);j(l),a(b);var o=n(b,2),c=n(s(o),2);St(c),a(o);var v=n(o,2),S=s(v),R=s(S);j(R),wt(),a(S),a(v);var I=n(v,2),w=s(I);w.__click=()=>r(x,!1);var A=n(w,2),F=s(A,!0);a(A),a(I),a(y),a(d),a(i),U(f=>{l.disabled=t(_),c.disabled=t(_),R.disabled=t(_),w.disabled=t(_),A.disabled=f,C(F,t(_)?"Creating...":"Create Set")},[()=>t(_)||!t(k).trim()]),kt("submit",y,f=>{f.preventDefault(),st()}),K(l,()=>t(k),f=>r(k,f)),K(c,()=>t(O),f=>r(O,f)),Ot(R,()=>t(L),f=>r(L,f)),p(e,i)};E(dt,e=>{t(x)&&e(ct)})}p(Q,H),gt()}Dt(["click"]);export{Wt as component};
//# sourceMappingURL=7.DuLYKynO.js.map
