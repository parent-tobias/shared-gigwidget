{"version":3,"mappings":"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","names":["user","$.state","loading","hasLoaded","$.user_effect","browser","loadUser","getDatabase","users","err","$.set","setTier","tier","$.get","tiers","main","root","$.head","$$anchor","div","root_2","section","$.first_child","fragment_1","div_1","span","p","section_1","div_2","$.index","info","$.derived","TIER_INFO","isCurrent","div_3","root_5","h3","p_1","p_2","root_6","$.template_effect","$.set_text","text_4","p_3","root_7","$$render","consequent_1","alternate","ul","$.sibling","node_2","$.each","feature","li","root_8","span_1","root_9","button","root_10","consequent_2","alternate_1","classes","$.set_class","text_2","text_3","getEffectiveTier","consequent_3","consequent","alternate_2"],"ignoreList":[],"sources":["../../../../../../src/routes/account/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { browser } from '$app/environment';\n  import type { User, SubscriptionTier } from '@gigwidget/core';\n  import { TIER_INFO, getEffectiveTier, getUserPermissions } from '@gigwidget/core';\n\n  let user = $state<User | null>(null);\n  let loading = $state(true);\n  let hasLoaded = false;\n\n  $effect(() => {\n    if (!browser || hasLoaded) return;\n    hasLoaded = true;\n    loadUser();\n  });\n\n  async function loadUser() {\n    try {\n      const { getDatabase } = await import('@gigwidget/db');\n      const db = getDatabase();\n      const users = await db.users.toArray();\n      if (users.length > 0) {\n        user = users[0];\n      }\n    } catch (err) {\n      console.error('Failed to load user:', err);\n    } finally {\n      loading = false;\n    }\n  }\n\n  async function setTier(tier: SubscriptionTier) {\n    if (!user) return;\n    try {\n      const { getDatabase } = await import('@gigwidget/db');\n      const db = getDatabase();\n      await db.users.update(user.id, { subscriptionTier: tier });\n      user = { ...user, subscriptionTier: tier };\n    } catch (err) {\n      console.error('Failed to update tier:', err);\n    }\n  }\n\n  const tiers: SubscriptionTier[] = ['free', 'basic', 'pro', 'mod'];\n</script>\n\n<svelte:head>\n  <title>Account - Gigwidget</title>\n</svelte:head>\n\n<main class=\"container\">\n  <header class=\"page-header\">\n    <a href=\"/\" class=\"back-link\">&larr; Home</a>\n    <h1>Account</h1>\n  </header>\n\n  {#if loading}\n    <div class=\"loading\">Loading...</div>\n  {:else if user}\n    <section class=\"current-plan\">\n      <h2>Current Plan</h2>\n      <div class=\"plan-card active\">\n        <span class=\"plan-name\">{TIER_INFO[getEffectiveTier(user)].displayName}</span>\n        <p class=\"plan-desc\">{TIER_INFO[getEffectiveTier(user)].description}</p>\n      </div>\n    </section>\n\n    <section class=\"plans\">\n      <h2>Available Plans</h2>\n      <div class=\"plans-grid\">\n        {#each tiers as tier}\n          {@const info = TIER_INFO[tier]}\n          {@const isCurrent = user.subscriptionTier === tier}\n          <div class=\"plan-card\" class:active={isCurrent}>\n            <h3>{info.displayName}</h3>\n            <p class=\"plan-desc\">{info.description}</p>\n            {#if info.price}\n              <p class=\"plan-price\">{info.price}</p>\n            {:else}\n              <p class=\"plan-price\">Free</p>\n            {/if}\n            <ul class=\"features\">\n              {#each info.features as feature}\n                <li>{feature}</li>\n              {/each}\n            </ul>\n            {#if isCurrent}\n              <span class=\"current-badge\">Current Plan</span>\n            {:else}\n              <button class=\"btn btn-primary\" onclick={() => setTier(tier)}>\n                Select Plan\n              </button>\n            {/if}\n          </div>\n        {/each}\n      </div>\n    </section>\n  {/if}\n</main>\n\n<style>\n  .page-header {\n    padding: var(--spacing-lg) 0;\n    border-bottom: 1px solid var(--color-border);\n  }\n\n  .back-link {\n    font-size: 0.875rem;\n    color: var(--color-text-muted);\n  }\n\n  .current-plan, .plans {\n    margin-top: var(--spacing-xl);\n  }\n\n  .plans-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\n    gap: var(--spacing-md);\n    margin-top: var(--spacing-md);\n  }\n\n  .plan-card {\n    background: var(--color-bg-secondary);\n    border: 2px solid var(--color-border);\n    border-radius: var(--radius-lg);\n    padding: var(--spacing-lg);\n  }\n\n  .plan-card.active {\n    border-color: var(--color-primary);\n  }\n\n  .plan-desc {\n    color: var(--color-text-muted);\n    font-size: 0.875rem;\n  }\n\n  .plan-price {\n    font-size: 1.25rem;\n    font-weight: 600;\n    margin: var(--spacing-sm) 0;\n  }\n\n  .features {\n    list-style: none;\n    padding: 0;\n    margin: var(--spacing-md) 0;\n    font-size: 0.875rem;\n  }\n\n  .features li {\n    padding: var(--spacing-xs) 0;\n    color: var(--color-text-muted);\n  }\n\n  .features li::before {\n    content: \"âœ“ \";\n    color: var(--color-primary);\n  }\n\n  .current-badge {\n    display: inline-block;\n    background: var(--color-primary);\n    color: white;\n    padding: var(--spacing-xs) var(--spacing-sm);\n    border-radius: var(--radius-sm);\n    font-size: 0.75rem;\n  }\n\n  .loading {\n    text-align: center;\n    padding: var(--spacing-xl);\n    color: var(--color-text-muted);\n  }\n</style>\n"],"file":"_app/immutable/nodes/3.C4LxtNQL.js"}